/*
    cycle.js
    2013-02-19
    Public Domain.
    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.
    This code should be minified before deployment.
    See http://javascript.crockford.com/jsmin.html
    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO
    NOT CONTROL.
*/
var cycle=exports
cycle.decycle=function(e){"use strict"
var t=[],r=[]
return function a(e,n){var i,o,c
if(!("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)){for(i=0;i<t.length;i+=1)if(t[i]===e)return{$ref:r[i]}
if(t.push(e),r.push(n),"[object Array]"===Object.prototype.toString.apply(e))for(c=[],i=0;i<e.length;i+=1)c[i]=a(e[i],n+"["+i+"]")
else{c={}
for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(c[o]=a(e[o],n+"["+JSON.stringify(o)+"]"))}return c}return e}(e,"$")},cycle.retrocycle=function retrocycle($){"use strict"
var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/
return function rez(value){var i,item,name,path
if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"==typeof item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(item))
else for(name in value)"object"==typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$}
